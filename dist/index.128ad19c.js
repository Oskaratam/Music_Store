let e,t,s,n,c,a;document.querySelector("main");const o=document.querySelector(".formDialog"),r=document.getElementById("arrow_right"),d=document.getElementById("homeLogInBtn"),l=document.querySelectorAll(".itemButton"),i=document.querySelector(".cartBtn"),m=document.querySelector(".cart"),u=document.querySelector(".cartItems");addToCartButtons=document.querySelectorAll("#addToCartBtn"),countCartItemsImage=document.getElementById("countCartItemsImage"),totalPrice=document.querySelector(".totalPrice"),checkout=document.getElementById("checkout"),window.addEventListener("scroll",()=>{document.body.style.cssText=`--scrollTop: ${window.scrollY}px`});let p=1;const h={1:"first",2:"second",3:"third",4:"fourth",5:"fifth",6:"sixth"};r.addEventListener("click",()=>{3===p?(document.querySelector("#photo3").classList.remove("active"),document.querySelector("#photo2").classList.remove("active"),p=1):p+=1,document.querySelector("#photo"+p).classList.add("active")}),d.addEventListener("click",()=>{o.classList.add("formsOpened"),document.querySelector(".overlay").classList.remove("hidden")});const y=()=>{o.classList.remove("formsOpened"),document.querySelector(".overlay").classList.add("hidden")};document.querySelector(".overlay").addEventListener("click",()=>{y()}),document.addEventListener("keydown",e=>{"Escape"!=e.key||o.classList.contains("hidden")||y()}),(createElementsInItemBoxes=()=>{for(let e=1;e<7;e++){let t=document.createElement("img");t.classList.add("itemImage");let s=document.createElement("span");s.classList.add("itemName");let n=document.createElement("span");n.classList.add("itemPrice");let c=document.querySelector(`.${h[e]}`);c.appendChild(t),c.appendChild(s),c.appendChild(n)}})();const L=e=>{for(let t=1;t<7;t++){let s=document.querySelector(`.item.${h[t]}`);s.setAttribute("data-itemtype",`${e[0]}`),s.setAttribute("data-item",`${e[t]}`),document.getElementsByClassName("itemImage")[t-1].setAttribute("src",`${e[t].imageSource}`),document.getElementsByClassName("itemName")[t-1].innerHTML=`${e[t].name}`,document.getElementsByClassName("itemPrice")[t-1].innerHTML=`${e[t].price/100}$`}};fetch("http://localhost:3000/items").then(e=>e.json()).then(o=>{e=o.guitars,bass=o.bass,t=o.keys,s=o.drums,n=o.amps,L(e),c=[t,s,e,bass,n],a={guitars:e,drums:s,bass:bass,amps:n,keys:t}}).catch(e=>{console.error(e)});for(let e=0;e<l.length;e++)l[e].addEventListener("click",()=>{document.querySelector(".currentItemButton").classList.remove("currentItemButton"),l[e].classList.add("currentItemButton"),L(c[e]),addToCartButtons.forEach(e=>e.classList.remove("addToCartBtnClicked"))});let g=0,E=[];i.addEventListener("click",()=>{m.classList.toggle("cartOpened")});const C=()=>{countCartItemsImage.innerHTML=`${g}`},v=()=>{let e=0;E.forEach(t=>e+=parseInt(t.price/100*t.quantity)),totalPrice.innerHTML=`Total ${e}$`};for(let e=0;e<addToCartButtons.length;e++)addToCartButtons[e].addEventListener("click",()=>{if(g<=5){let t=addToCartButtons[e];addToCartButtons[e].classList.add("addToCartBtnClicked");let s=a[document.querySelectorAll(".item")[e].dataset.itemtype][e+1];if(s.quantity=1,!E.includes(s)){E.push(s),console.log(E);let e=document.createElement("div");e.classList.add("cartItem"),u.appendChild(e);let n=document.createElement("p");n.classList.add("cartItemName"),n.innerHTML=s.name,e.appendChild(n);let c=document.createElement("img");c.setAttribute("src","../img/minus.png"),c.classList.add("minusIcon"),e.appendChild(c);let a=document.createElement("input");a.classList.add("cartItemQuantity"),a.setAttribute("value","1"),a.setAttribute("type","number"),a.setAttribute("min","1"),a.setAttribute("max","5"),e.appendChild(a);let o=document.createElement("img");o.setAttribute("src","../img/plus.png"),o.classList.add("plusIcon"),e.appendChild(o);let r=document.createElement("p");r.classList.add("cartItemPrice"),r.innerHTML=`${s.price/100}$`,e.appendChild(r),g+=1,C(),v();let d=()=>{let e=a.value,t=parseInt(`${s.price/100}$`);E=E.filter(e=>e!=s),s.quantity=parseInt(e),console.log(E),E.push(s);for(let s=0;s<e;s++)r.innerHTML=`${t*e}$`;v()};c.addEventListener("click",()=>{a.stepDown(),d()}),o.addEventListener("click",()=>{a.stepUp(),d()});let l=document.createElement("img");l.classList.add("removeItemButton"),l.setAttribute("src","../img/cross.png"),e.appendChild(l),I(l,e,s,t)}}else alert("Cart is full ;)")});const I=(e,t,s,n)=>{e.addEventListener("click",()=>{t.remove(),E=E.filter(e=>e!=s),g-=1,C(),v(),n.classList.remove("addToCartBtnClicked")})};checkout.addEventListener("click",()=>{fetch("http://localhost:3000/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:E})}).then(e=>e.ok?e.json():e.json().then(e=>Promise.reject(e))).then(({url:e})=>{window.location=e}).catch(e=>{console.error(e)})});
//# sourceMappingURL=index.128ad19c.js.map
