var e,t,n;let o,c,s,a,d,r,l;document.querySelector("main");const i=document.querySelector(".formDialog"),m=document.getElementById("arrow_right"),u=document.getElementById("homeLogInBtn"),p=document.querySelectorAll(".itemButton"),y=document.querySelector(".cartBtn"),g=document.querySelector(".cart"),h=document.querySelector(".cartItems");addToCartButtons=document.querySelectorAll("#addToCartBtn"),countCartItemsImage=document.getElementById("countCartItemsImage"),totalPrice=document.querySelector(".totalPrice"),checkout=document.getElementById("checkout"),sendReportButton=document.querySelector(".sendReportButton"),issueReportInput=document.querySelector(".issueReportInput"),window.addEventListener("scroll",()=>{document.body.style.cssText=`--scrollTop: ${window.scrollY}px`});let I=1;const L={1:"first",2:"second",3:"third",4:"fourth",5:"fifth",6:"sixth"};m.addEventListener("click",()=>{3===I?(document.querySelector("#photo3").classList.remove("active"),document.querySelector("#photo2").classList.remove("active"),I=1):I+=1,document.querySelector("#photo"+I).classList.add("active")}),u.addEventListener("click",()=>{i.classList.add("formsOpened"),document.querySelector(".overlay").classList.remove("hidden")});const E=()=>{i.classList.remove("formsOpened"),document.querySelector(".overlay").classList.add("hidden")};document.querySelector(".overlay").addEventListener("click",()=>{E()}),document.addEventListener("keydown",e=>{"Escape"!=e.key||i.classList.contains("hidden")||E()}),(createElementsInItemBoxes=()=>{for(let e=1;e<7;e++){let t=document.createElement("img");t.classList.add("itemImage");let n=document.createElement("span");n.classList.add("itemName");let o=document.createElement("span");o.classList.add("itemPrice");let c=document.querySelector(`.${L[e]}`);c.appendChild(t),c.appendChild(n),c.appendChild(o)}})();const v=e=>{for(let t=1;t<7;t++){let n=document.querySelector(`.item.${L[t]}`);n.setAttribute("data-itemtype",`${e[0]}`),n.setAttribute("data-item",`${e[t]}`),document.getElementsByClassName("itemImage")[t-1].setAttribute("src",`${e[t].imageSource}`),document.getElementsByClassName("itemName")[t-1].innerHTML=`${e[t].name}`,document.getElementsByClassName("itemPrice")[t-1].innerHTML=`${e[t].price/100}$`}};fetch("http://localhost:3000/items").then(e=>e.json()).then(e=>{o=e.guitars,c=e.bass,s=e.keys,a=e.drums,d=e.amps,v(o),r=[s,a,o,c,d],l={guitars:o,drums:a,bass:c,amps:d,keys:s}}).catch(e=>{console.error(e)});for(let e=0;e<p.length;e++)p[e].addEventListener("click",()=>{document.querySelector(".currentItemButton").classList.remove("currentItemButton"),p[e].classList.add("currentItemButton"),v(r[e]),addToCartButtons.forEach(e=>e.classList.remove("addToCartBtnClicked"))});let B=0,C=[];y.addEventListener("click",()=>{g.classList.toggle("cartOpened")});const S=()=>{countCartItemsImage.innerHTML=`${B}`},q=()=>{let e=0;C.forEach(t=>e+=parseInt(t.price/100*t.quantity)),totalPrice.innerHTML=`Total ${e}$`};for(let e=0;e<addToCartButtons.length;e++)addToCartButtons[e].addEventListener("click",()=>{if(B<=5){let t=addToCartButtons[e];addToCartButtons[e].classList.add("addToCartBtnClicked");let n=l[document.querySelectorAll(".item")[e].dataset.itemtype][e+1];if(n.quantity=1,!C.includes(n)){C.push(n),console.log(C);let e=document.createElement("div");e.classList.add("cartItem"),h.appendChild(e);let o=document.createElement("p");o.classList.add("cartItemName"),o.innerHTML=n.name,e.appendChild(o);let c=document.createElement("img");c.setAttribute("src","../img/minus.png"),c.classList.add("minusIcon"),e.appendChild(c);let s=document.createElement("input");s.classList.add("cartItemQuantity"),s.setAttribute("value","1"),s.setAttribute("type","number"),s.setAttribute("min","1"),s.setAttribute("max","5"),e.appendChild(s);let a=document.createElement("img");a.setAttribute("src","../img/plus.png"),a.classList.add("plusIcon"),e.appendChild(a);let d=document.createElement("p");d.classList.add("cartItemPrice"),d.innerHTML=`${n.price/100}$`,e.appendChild(d),B+=1,S(),q();let r=()=>{let e=s.value,t=parseInt(`${n.price/100}$`);C=C.filter(e=>e!=n),n.quantity=parseInt(e),console.log(C),C.push(n);for(let n=0;n<e;n++)d.innerHTML=`${t*e}$`;q()};c.addEventListener("click",()=>{s.stepDown(),r()}),a.addEventListener("click",()=>{s.stepUp(),r()});let l=document.createElement("img");l.classList.add("removeItemButton"),l.setAttribute("src","../img/cross.png"),e.appendChild(l),f(l,e,n,t)}}else alert("Cart is full ;)")});const f=(e,t,n,o)=>{e.addEventListener("click",()=>{t.remove(),C=C.filter(e=>e!=n),B-=1,S(),q(),o.classList.remove("addToCartBtnClicked")})};checkout.addEventListener("click",()=>{fetch("http://localhost:3000/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:C})}).then(e=>e.ok?e.json():e.json().then(e=>Promise.reject(e))).then(({url:e})=>{window.location=e}).catch(e=>{console.error(e)})}),document.querySelector(".issueForm").onsubmit=e=>{e.preventDefault(),console.log(issueReportInput.value),issueReportInput.value="",document.querySelector(".acceptImage").classList.add("acceptImageOpened"),setTimeout(function(){document.querySelector(".acceptImage").classList.remove("acceptImageOpened")},2e3)},document.getElementById("logIn");const T=document.getElementById("signUp"),k=document.getElementById("signUpBtn");k.addEventListener("click",()=>{console.log(document.getElementById("name2").value)}),T.onsubmit=(e=document.getElementById("name2"),t=document.getElementById("email2"),n=document.getElementById("password2"),void(fetch("http://localhost:3000/users",{method:"POST",headers:{Content_Type:"application/json"},body:{name:e,email:t,password:n}}),console.log(document.getElementById("name2")),console.log(document.getElementById("email2"))));
//# sourceMappingURL=index.91090e78.js.map
